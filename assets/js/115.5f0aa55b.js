(window.webpackJsonp=window.webpackJsonp||[]).push([[115],{812:function(s,t,e){"use strict";e.r(t);var a=e(39),v=Object(a.a)({},(function(){var s=this,t=s._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h1",{attrs:{id:"windowspc同时配置gitlab和github"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#windowspc同时配置gitlab和github"}},[s._v("#")]),s._v(" WindowsPC同时配置GitLab和GitHub")]),s._v(" "),t("ClientOnly",[t("display-bar",{attrs:{displayData:s.$frontmatter}})],1),s._v(" "),t("blockquote",[t("p",[t("strong",[s._v("需求简述")]),s._v("：")]),s._v(" "),t("p",[s._v("工作中使用的"),t("strong",[s._v("版本控制工具")]),s._v("是公司内部搭建的"),t("code",[s._v("GitLab")]),s._v("，个人则使用"),t("code",[s._v("GitHub")]),s._v("。")]),s._v(" "),t("p",[s._v("二者都基于"),t("code",[s._v("Git")]),s._v("开发，但是分属两个不同平台，并且我在这两个平台注册的账号还是"),t("strong",[s._v("不同的邮箱以及不同的用户名")]),s._v("。。")]),s._v(" "),t("p",[s._v("而"),t("code",[s._v("git config --global user.name 'xxxx'")]),s._v("和"),t("code",[s._v("git config --global user.email 'xxxx@xxx.com'")]),s._v("配置的是全局用户名和邮箱。为消除不便，此时需要为办公电脑同时配置"),t("code",[s._v("GitLab")]),s._v("和"),t("code",[s._v("GitHub")]),s._v("。")]),s._v(" "),t("p",[t("strong",[s._v("参考资料")]),s._v("：")]),s._v(" "),t("p",[t("a",{attrs:{href:"https://www.jianshu.com/p/63c3389eb537",target:"_blank",rel:"noopener noreferrer"}},[s._v("亲测本地电脑同时配置gitlab和github账号"),t("OutboundLink")],1)])]),s._v(" "),t("h2",{attrs:{id:"一、原理"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#一、原理"}},[s._v("#")]),s._v(" 一、原理")]),s._v(" "),t("p",[s._v("根据"),t("strong",[s._v("参考资料")]),s._v("，要想在同一台电脑上同时配置"),t("code",[s._v("GitLab")]),s._v("和"),t("code",[s._v("GitHub")]),s._v("，只要确保三点：")]),s._v(" "),t("blockquote",[t("ul",[t("li",[s._v("保存两份不同的SSH Key各自对应自己的平台；")]),s._v(" "),t("li",[s._v("提交代码时能够正确使用对应平台的SSH Key提交；")]),s._v(" "),t("li",[s._v("本地仓库能"),t("strong",[s._v("正确关联到对应的平台")]),s._v("，能够正确"),t("strong",[s._v("拉取和提交代码")]),s._v("。")])])]),s._v(" "),t("p",[s._v("针对这三点，有以下办法解决：👇")]),s._v(" "),t("ul",[t("li",[s._v("获取SSH Key时将生成的"),t("code",[s._v("GitLab")]),s._v("和"),t("code",[s._v("GitHub")]),s._v("的Key文件"),t("code",[s._v("id_rsa")]),s._v("区分命名；")]),s._v(" "),t("li",[s._v("在"),t("code",[s._v(".ssh")]),s._v("文件夹写入配置文件，根据"),t("strong",[s._v("本地仓库关联的远程仓库地址自动选择用哪个Key提交代码")]),s._v("；")]),s._v(" "),t("li",[s._v("取消"),t("code",[s._v("Git")]),s._v("中全局的"),t("code",[s._v("user.name")]),s._v("和"),t("code",[s._v("user.email")]),s._v("设置，"),t("strong",[s._v("为每个本地仓库单独设置局部的"),t("code",[s._v("user.name")]),s._v("和"),t("code",[s._v("user.email")])]),s._v("。")])]),s._v(" "),t("h2",{attrs:{id:"二、操作实践"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#二、操作实践"}},[s._v("#")]),s._v(" 二、操作实践")]),s._v(" "),t("h3",{attrs:{id:"开始"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#开始"}},[s._v("#")]),s._v(" 开始")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("ls")]),s._v(" ~/.ssh "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看 .ssh 路径下保存的key")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" config "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--list")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看配置")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("p",[s._v("通过查看保存的SSH Key，在"),t("code",[s._v(".ssh")]),s._v("目录下已存在一份Key（即是在前文"),t("RouterLink",{attrs:{to:"/blog/other/devtool/gitlab-init.html"}},[s._v("GitLab配置及测试提交笔记")]),s._v("中为"),t("code",[s._v("GitLab")]),s._v("配置的Key），接下来只要再下载一份"),t("code",[s._v("GitHub")]),s._v("的Key就行了。")],1),s._v(" "),t("p",[s._v("下一步查看配置可以看到"),t("code",[s._v("Git")]),s._v("的全局配置中已经设置了"),t("strong",[s._v("全局的"),t("code",[s._v("user.name")]),s._v("和"),t("code",[s._v("user.email")])]),s._v("。")]),s._v(" "),t("p",[t("img",{attrs:{src:"/images/other/devtool/gitlab-and-github-01.png",alt:"gitlab-and-github-01"}})]),s._v(" "),t("p",[t("img",{attrs:{src:"/images/other/devtool/gitlab-and-github-02.png",alt:"gitlab-and-github-02"}})]),s._v(" "),t("h3",{attrs:{id:"获取githubssh-key"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#获取githubssh-key"}},[s._v("#")]),s._v(" 获取"),t("code",[s._v("GitHub")]),s._v("SSH Key")]),s._v(" "),t("p",[s._v("接下来输入命令"),t("code",[s._v("ssh-keygen -t rsa -C 'email@xxx.com'")]),s._v("获取Key。")]),s._v(" "),t("div",{staticClass:"custom-block danger"},[t("p",{staticClass:"custom-block-title"},[s._v("注意⚠️")]),s._v(" "),t("ul",[t("li",[t("p",[s._v("在保存Key的时候（下图红圈处）需要"),t("strong",[s._v("手动键入文件名")]),s._v("，我在此输入"),t("code",[s._v("id_rsa_github")]),s._v("用以标识这是"),t("code",[s._v("GitHub")]),s._v("的Key；")])]),s._v(" "),t("li",[t("p",[s._v("获取SSH Key需要配置"),t("strong",[s._v("全局的"),t("code",[s._v("user.name")]),s._v("和"),t("code",[s._v("user.email")])]),s._v("，"),t("strong",[s._v("否则会失败")]),s._v("。")]),s._v(" "),t("p",[s._v("👇下面是一次失败案例，重置后获取SSH Key成功，但是"),t("strong",[s._v("并没有保存成功")]),s._v("。")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" config "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--global")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--unset")]),s._v(" user.name\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" config "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--global")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--unset")]),s._v(" user.email\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("p",[t("img",{attrs:{src:"/images/other/devtool/gitlab-and-github-04.png",alt:"gitlab-and-github-04"}})]),s._v(" "),t("p",[t("img",{attrs:{src:"/images/other/devtool/gitlab-and-github-05.png",alt:"gitlab-and-github-05"}})])])])]),s._v(" "),t("p",[t("img",{attrs:{src:"/images/other/devtool/gitlab-and-github-03.png",alt:"gitlab-and-github-03"}})]),s._v(" "),t("h3",{attrs:{id:"创建配置文件"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#创建配置文件"}},[s._v("#")]),s._v(" 创建配置文件")]),s._v(" "),t("p",[s._v("Key保存成功，接下来在"),t("code",[s._v(".ssh")]),s._v("文件夹下新建一个"),t("code",[s._v("config")]),s._v("文件，"),t("strong",[s._v("没有后缀，就是"),t("code",[s._v("config")])]),s._v("。")]),s._v(" "),t("blockquote",[t("p",[s._v("由于"),t("code",[s._v("GitLab")]),s._v("搭建在公司内网，使用内网IP作为识别Host。")]),s._v(" "),t("p",[t("code",[s._v("User")]),s._v("必须为"),t("strong",[s._v("准确的用户名")]),s._v("，"),t("code",[s._v("IdentityFile")]),s._v("需"),t("strong",[s._v("指定对应的Key文件")]),s._v("。")])]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("# gitlab\nHost 192.168.0.1\nHostName 192.168.0.1\nUser xxxx\nIdentityFile ~/.ssh/id_rsa\n\n# github\nHost github.com\nHostName github.com\nUser xxxx\nIdentityFile ~/.ssh/id_rsa_github\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br")])]),t("p",[t("img",{attrs:{src:"/images/other/devtool/gitlab-and-github-06.png",alt:"gitlab-and-github-06"}})]),s._v(" "),t("p",[t("strong",[s._v("接下来测试配置：")])]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("ssh")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-T")]),s._v(" git@github.com "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Hi xxx! You've successfully authenticated....")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("ssh")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-T")]),s._v(" git@192.168.0.1 "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Welcome to GitLab, @xxxx")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("p",[t("img",{attrs:{src:"/images/other/devtool/gitlab-and-github-07.png",alt:"gitlab-and-github-07"}})]),s._v(" "),t("p",[t("img",{attrs:{src:"/images/other/devtool/gitlab-and-github-08.png",alt:"gitlab-and-github-08"}})]),s._v(" "),t("h3",{attrs:{id:"为本地仓库配置user-name和user-email"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#为本地仓库配置user-name和user-email"}},[s._v("#")]),s._v(" 为本地仓库配置"),t("code",[s._v("user.name")]),s._v("和"),t("code",[s._v("user.email")])]),s._v(" "),t("p",[s._v("由于设置了两个SSH Key，为使本地仓库在提交代码更新时能正确使用对应平台的Key，每个本地仓库都需要设置"),t("code",[s._v("user.name")]),s._v("和"),t("code",[s._v("user.email")]),s._v("。")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" C:/GitLab/ExampleRepo\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" config user.name "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"xxxx"')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" config user.email "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"email@xxx.com"')]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("div",{staticClass:"custom-block warning"},[t("p",{staticClass:"custom-block-title"},[s._v("提示")]),s._v(" "),t("p",[s._v("如果觉得为每个本地仓库设置"),t("code",[s._v("user.name")]),s._v("和"),t("code",[s._v("user.email")]),s._v("太麻烦，"),t("strong",[s._v("可以选择将常用的平台如"),t("code",[s._v("GitLab")]),s._v("的"),t("code",[s._v("name")]),s._v("和"),t("code",[s._v("email")]),s._v("设置为全局的"),t("code",[s._v("user.name")]),s._v("和"),t("code",[s._v("user.email")])]),s._v("。"),t("strong",[s._v("不常用的平台的本地仓库则每个单独设置其对应的"),t("code",[s._v("user.name")]),s._v("和"),t("code",[s._v("user.email")])]),s._v("。")]),s._v(" "),t("p",[t("strong",[s._v("👉"),t("code",[s._v("Git")]),s._v("在提交时优先使用本地仓库配置的"),t("code",[s._v("user.name")]),s._v("和"),t("code",[s._v("user.email")]),s._v("，如无设置再使用全局的"),t("code",[s._v("user.name")]),s._v("和"),t("code",[s._v("user.email")]),s._v("。")])])])],1)}),[],!1,null,null,null);t.default=v.exports}}]);