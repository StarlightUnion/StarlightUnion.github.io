(window.webpackJsonp=window.webpackJsonp||[]).push([[103],{799:function(s,t,n){"use strict";n.r(t);var a=n(39),e=Object(a.a)({},(function(){var s=this,t=s._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h1",{attrs:{id:"nginx部署笔记-windows-1"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#nginx部署笔记-windows-1"}},[s._v("#")]),s._v(" Nginx部署笔记-Windows（1）")]),s._v(" "),t("ClientOnly",[t("display-bar",{attrs:{displayData:s.$frontmatter}})],1),s._v(" "),t("blockquote",[t("p",[s._v("对于"),t("strong",[s._v("前后端分离")]),s._v("的项目，由于"),t("strong",[s._v("页面和服务运行的端口不一致，会产生跨域问题")]),s._v("，所以必须使用反向代理以解决跨域问题。")])]),s._v(" "),t("h2",{attrs:{id:"一、获取nginx"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#一、获取nginx"}},[s._v("#")]),s._v(" 一、获取Nginx")]),s._v(" "),t("p",[t("img",{attrs:{src:"/images/other/aboutdeploy/nginx-deploy-01.png",alt:"nginx"}})]),s._v(" "),t("p",[s._v("可以从"),t("a",{attrs:{href:"http://nginx.org/en/download.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("官网"),t("OutboundLink")],1),s._v("获取，上图中选择一个版本，下载后直接解压即可。")]),s._v(" "),t("p",[s._v("将"),t("strong",[s._v("解压后的整个文件夹")]),s._v("，拷贝至目标计算机/服务器。（这里以"),t("code",[s._v("nginx-1.14.2")]),s._v("为例）")]),s._v(" "),t("div",{staticClass:"custom-block warning"},[t("p",{staticClass:"custom-block-title"},[s._v("WARNING")]),s._v(" "),t("p",[s._v("⚠️注意：nginx不需要安装，开箱即用")])]),s._v(" "),t("p",[t("img",{attrs:{src:"/images/other/aboutdeploy/nginx-deploy-02.png",alt:"nginx"}})]),s._v(" "),t("p",[s._v("如上图所示，这是一个典型的"),t("code",[s._v("nginx")]),s._v("的文件目录结构。")]),s._v(" "),t("ul",[t("li",[t("p",[s._v("配置文件："),t("code",[s._v("nginx-1.14.2/conf/nginx.conf")])])]),s._v(" "),t("li",[t("p",[s._v("前端代码："),t("code",[s._v("nginx-1.14.2/project")])])]),s._v(" "),t("li",[t("p",[s._v("报错信息（默认）："),t("code",[s._v("nginx-1.14.2/logs/error.log")])])])]),s._v(" "),t("h2",{attrs:{id:"二、配置nginx"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#二、配置nginx"}},[s._v("#")]),s._v(" 二、配置Nginx")]),s._v(" "),t("div",{staticClass:"language-nginx line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-nginx"}},[t("code",[t("span",{pre:!0,attrs:{class:"token directive"}},[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("http")])]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token directive"}},[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("include")]),s._v("       mime.types")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token directive"}},[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("default_type")]),s._v("  application/octet-stream")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n    "),t("span",{pre:!0,attrs:{class:"token directive"}},[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("sendfile")]),s._v("        "),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("on")])]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# tcp_nopush     on;")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#keepalive_timeout  0;")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token directive"}},[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("keepalive_timeout")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("65")])]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#gzip  on;")]),s._v("\n\n    "),t("span",{pre:!0,attrs:{class:"token directive"}},[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("upstream")]),s._v(" web1")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#负载均衡模块")]),s._v("\n    \t"),t("span",{pre:!0,attrs:{class:"token directive"}},[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("server")]),s._v(" localhost:8080")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#服务地址")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n    "),t("span",{pre:!0,attrs:{class:"token directive"}},[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("server")])]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token directive"}},[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("listen")]),s._v("       "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("8000")])]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#监听端口")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token directive"}},[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("server_name")]),s._v("  localhost")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#前端地址")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token directive"}},[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("root")]),s._v("   project")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#前端项目文件目录")]),s._v("\n\n        "),t("span",{pre:!0,attrs:{class:"token directive"}},[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("location")]),s._v(" /")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#路由模块")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token directive"}},[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("index")]),s._v(" index.html index.htm")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token directive"}},[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("autoindex")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("on")])]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#自动文件索引 开")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#autoindex_exact_size off;")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#autoindex_localtime on;")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n        "),t("span",{pre:!0,attrs:{class:"token directive"}},[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("location")]),s._v(" ^~/api/")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\t"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#服务请求代理")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token directive"}},[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("proxy_pass")]),s._v(" http://web1")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token directive"}},[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("proxy_set_header")]),s._v(" X-real-ip "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$remote_addr")])]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token directive"}},[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("proxy_set_header")]),s._v(" Host "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$http_host")])]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n        "),t("span",{pre:!0,attrs:{class:"token directive"}},[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("error_page")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("500")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("502")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("503")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("504")]),s._v("  /50x.html")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token directive"}},[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("location")]),s._v(" = /50x.html")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        \t"),t("span",{pre:!0,attrs:{class:"token directive"}},[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("root")]),s._v("   html")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br"),t("span",{staticClass:"line-number"},[s._v("26")]),t("br"),t("span",{staticClass:"line-number"},[s._v("27")]),t("br"),t("span",{staticClass:"line-number"},[s._v("28")]),t("br"),t("span",{staticClass:"line-number"},[s._v("29")]),t("br"),t("span",{staticClass:"line-number"},[s._v("30")]),t("br"),t("span",{staticClass:"line-number"},[s._v("31")]),t("br"),t("span",{staticClass:"line-number"},[s._v("32")]),t("br"),t("span",{staticClass:"line-number"},[s._v("33")]),t("br"),t("span",{staticClass:"line-number"},[s._v("34")]),t("br"),t("span",{staticClass:"line-number"},[s._v("35")]),t("br"),t("span",{staticClass:"line-number"},[s._v("36")]),t("br"),t("span",{staticClass:"line-number"},[s._v("37")]),t("br"),t("span",{staticClass:"line-number"},[s._v("38")]),t("br")])]),t("p",[s._v("以上为一个"),t("strong",[s._v("典型"),t("s",[s._v("简单")]),t("strong",[s._v("的nginx配置示例，前端项目部署在"),t("code",[s._v("http://localhost:8000")]),s._v("，若")]),s._v("请求地址中")]),s._v("带有"),t("code",[s._v("/api/")]),s._v("，被视为请求服务，将被代理至"),t("code",[s._v("http://localhost:8080")]),s._v("。")]),s._v(" "),t("p",[s._v("接下来启动nginx就好了->"),t("code",[s._v("start nginx")]),s._v("。")]),s._v(" "),t("h2",{attrs:{id:"三、nginx常用命令"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#三、nginx常用命令"}},[s._v("#")]),s._v(" 三、Nginx常用命令")]),s._v(" "),t("ul",[t("li",[t("p",[s._v("启动服务："),t("code",[s._v("start nginx")])])]),s._v(" "),t("li",[t("p",[s._v("强制停止："),t("code",[s._v("nginx -s stop")])])]),s._v(" "),t("li",[t("p",[s._v("强制重启："),t("code",[s._v("nginx -s reload")])])]),s._v(" "),t("li",[t("p",[s._v("强制退出："),t("code",[s._v("nginx -s quit")])])]),s._v(" "),t("li",[t("p",[s._v("测试配置："),t("code",[s._v("nginx -t")])])]),s._v(" "),t("li",[t("p",[s._v("强制关闭"),t("strong",[s._v("windows")]),s._v("下"),t("strong",[s._v("所有nginx进程")]),s._v("："),t("code",[s._v("taskkill /im nginx.exe /f")])])])]),s._v(" "),t("div",{staticClass:"custom-block warning"},[t("p",{staticClass:"custom-block-title"},[s._v("WARNING")]),s._v(" "),t("p",[s._v("⚠️注意：以上"),t("strong",[s._v("nginx开头的命令")]),s._v("为"),t("strong",[s._v("cmd")]),s._v("中使用命令，"),t("strong",[s._v("powershel")]),s._v("l中会报错（如下图所示），如果想在powershell中使用，需要将"),t("code",[s._v("nginx")]),s._v("替换为"),t("code",[s._v(".\\nginx")]),s._v("，如"),t("code",[s._v("nginx -s reload")]),s._v("->"),t("code",[s._v(".\\nginx -s reload")]),s._v("。")])]),s._v(" "),t("p",[t("img",{attrs:{src:"/images/other/aboutdeploy/nginx-deploy-03.png",alt:"nginx"}})]),s._v(" "),t("h2",{attrs:{id:"四、nginx常见错误"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#四、nginx常见错误"}},[s._v("#")]),s._v(" 四、Nginx常见错误")]),s._v(" "),t("h3",{attrs:{id:"_1-需使用管理员权限打开cmd"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-需使用管理员权限打开cmd"}},[s._v("#")]),s._v(" 1.需使用管理员权限打开cmd")]),s._v(" "),t("p",[t("img",{attrs:{src:"/images/other/aboutdeploy/nginx-deploy-04.png",alt:"nginx"}})]),s._v(" "),t("h3",{attrs:{id:"_2-nginx-s-reload需要在start-nginx后使用"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-nginx-s-reload需要在start-nginx后使用"}},[s._v("#")]),s._v(" 2.nginx -s reload需要在start nginx后使用")]),s._v(" "),t("p",[t("img",{attrs:{src:"/images/other/aboutdeploy/nginx-deploy-05.png",alt:"nginx"}})])],1)}),[],!1,null,null,null);t.default=e.exports}}]);