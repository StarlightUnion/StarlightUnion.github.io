(window.webpackJsonp=window.webpackJsonp||[]).push([[124],{822:function(s,n,a){"use strict";a.r(n);var e=a(39),t=Object(e.a)({},(function(){var s=this,n=s._self._c;return n("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[n("h1",{attrs:{id:"centos下配置node-js和nginx环境"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#centos下配置node-js和nginx环境"}},[s._v("#")]),s._v(" CentOS下配置Node.js和Nginx环境")]),s._v(" "),n("ClientOnly",[n("display-bar",{attrs:{displayData:s.$frontmatter}})],1),s._v(" "),n("blockquote",[n("p",[n("em",[s._v("CentOS版本：7.6")])]),s._v(" "),n("p",[s._v("本文记录了"),n("em",[s._v("CentOS")]),s._v("下配置"),n("code",[s._v("node.js")]),s._v("和"),n("code",[s._v("nginx")]),s._v("的过程。"),n("em",[s._v("CentOS")]),s._v("是"),n("em",[s._v("Linux")]),s._v("的发行版之一，基于"),n("em",[s._v("Red Hat")]),s._v("（红帽），具有较高的稳定性，相对于"),n("em",[s._v("Windows Server")]),s._v("还有安全的特点。")])]),s._v(" "),n("h2",{attrs:{id:"一、安装node-js"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#一、安装node-js"}},[s._v("#")]),s._v(" 一、安装"),n("code",[s._v("node.js")])]),s._v(" "),n("h3",{attrs:{id:"_1-下载安装包"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1-下载安装包"}},[s._v("#")]),s._v(" 1.下载安装包")]),s._v(" "),n("p",[s._v("这里有两种方式：")]),s._v(" "),n("ul",[n("li",[s._v("在本地下载后通过"),n("strong",[s._v("FTP")]),s._v("上传至服务器；")]),s._v(" "),n("li",[s._v("直接在服务器下载。")])]),s._v(" "),n("p",[n("s",[s._v("如果服务器安装了"),n("a",{attrs:{href:"https://www.bt.cn/",target:"_blank",rel:"noopener noreferrer"}},[s._v("宝塔面板"),n("OutboundLink")],1),s._v("，可以直接通过里面的"),n("strong",[s._v("软件商店")]),s._v("下载并直接傻瓜式安装。。。")])]),s._v(" "),n("p",[s._v("在服务器上下载：👇")]),s._v(" "),n("div",{staticClass:"language-shell line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-shell"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[s._v("wget")]),s._v(" https://cdn.npm.taobao.org/dist/node/v14.3.0/node-v14.3.0-linux-x64.tar.xz\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("下载路径可以从"),n("a",{attrs:{href:"https://nodejs.org/en/download/",target:"_blank",rel:"noopener noreferrer"}},[s._v("node.js官网"),n("OutboundLink")],1),s._v("获取。")]),s._v(" "),n("h3",{attrs:{id:"_2-开始安装"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_2-开始安装"}},[s._v("#")]),s._v(" 2.开始安装")]),s._v(" "),n("p",[n("img",{attrs:{src:"/images/other/systemenv/centos-node-04.png",alt:"centos-node-04"}})]),s._v(" "),n("p",[s._v("下载完成后将存放在根目录下的"),n("code",[s._v("root")]),s._v("中（在没有进入其他目录的情况下）。")]),s._v(" "),n("div",{staticClass:"language-shell line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-shell"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[s._v("tar")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-xf")]),s._v(" node-v14.3.0-linux-x64.tar.xz "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 解压")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("ls")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br")])]),n("p",[s._v("可以发现已经解压成功，目录下已经多了一个"),n("code",[s._v("node-v14.3.0-linux-x64")]),s._v("文件夹。")]),s._v(" "),n("p",[s._v("这个版本是"),n("strong",[s._v("即下即用的")]),s._v("，但是此时"),n("code",[s._v("node")]),s._v("和"),n("code",[s._v("npm")]),s._v("只在目录下，全局中并没有，下面示例👇")]),s._v(" "),n("p",[n("img",{attrs:{src:"/images/other/systemenv/centos-node-07.png",alt:"centos-node-07"}})]),s._v(" "),n("p",[n("img",{attrs:{src:"/images/other/systemenv/centos-node-02.png",alt:"centos-node-02"}})]),s._v(" "),n("p",[s._v("可以发现在全局中使用"),n("code",[s._v("node -v")]),s._v("是拿不到"),n("code",[s._v("node.js")]),s._v("的版本号的。")]),s._v(" "),n("p",[s._v("这在日常使用中会有点麻烦，因为想要用"),n("code",[s._v("node")]),s._v("或者"),n("code",[s._v("npm")]),s._v("命令就得到"),n("code",[s._v("/root/node-v14.3.0-linux-x64/bin/")]),s._v("里面去。")]),s._v(" "),n("h3",{attrs:{id:"_3-建立软链接"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_3-建立软链接"}},[s._v("#")]),s._v(" 3.建立软链接")]),s._v(" "),n("blockquote",[n("p",[s._v("在"),n("em",[s._v("windows")]),s._v("中就是类似与"),n("strong",[s._v("快捷方式")]),s._v("，将无需安装的软件包中的可执行文件（.exe）发送到桌面，这样就可以在桌面打开软件了。。")])]),s._v(" "),n("p",[s._v("这里将使用"),n("code",[s._v("ln -s")]),s._v("命令，将"),n("code",[s._v("node")]),s._v("、"),n("code",[s._v("npm")]),s._v("等“发送”到全局，这样可以在任何地方使用。")]),s._v(" "),n("div",{staticClass:"language-shell line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-shell"}},[n("code",[n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("$PATH")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看全局有哪些路径")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[n("img",{attrs:{src:"/images/other/systemenv/centos-node-01.png",alt:"centos-node-01"}})]),s._v(" "),n("div",{staticClass:"language-shell line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-shell"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 将root目录中的node安装包中的node 链接到 全局路径/usr/bin/，下面的类似")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("ln")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-s")]),s._v(" /root/node-v14.3.0-linux-x64/bin/node /usr/bin/node\n\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("ln")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-s")]),s._v(" /root/node-v14.3.0-linux-x64/bin/npm /usr/bin/npm\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("ln")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-s")]),s._v(" /root/node-v14.3.0-linux-x64/bin/npx /usr/bin/npx\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br")])]),n("p",[n("img",{attrs:{src:"/images/other/systemenv/centos-node-03.png",alt:"centos-node-03"}})]),s._v(" "),n("div",{staticClass:"language-shell line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-shell"}},[n("code",[n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" /usr/bin "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("ls")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 进入/usr/bin 查看")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("node")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-v")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-v")]),s._v("\nnpx "),n("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-v")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br")])]),n("p",[n("img",{attrs:{src:"/images/other/systemenv/centos-node-05.png",alt:"centos-node-05"}})]),s._v(" "),n("p",[n("img",{attrs:{src:"/images/other/systemenv/centos-node-06.png",alt:"centos-node-06"}})]),s._v(" "),n("div",{staticClass:"custom-block danger"},[n("p",{staticClass:"custom-block-title"},[s._v("WARNING")]),s._v(" "),n("p",[s._v("⚠️软链接的路径必须为"),n("strong",[s._v("绝对路径")]),s._v("（全路径），否则出现下面问题。。")]),s._v(" "),n("p",[n("img",{attrs:{src:"/images/other/systemenv/centos-node-08.png",alt:"centos-node-08"}})]),s._v(" "),n("p",[s._v("这里建立软链接时没有使用"),n("strong",[s._v("绝对路径")]),s._v("，对比上面成功的图可以发现，这个图里的"),n("code",[s._v("node")]),s._v("等都是"),n("strong",[s._v("红色")]),s._v("的，并且输入"),n("code",[s._v("node -v")]),s._v("也不成功。。")])]),s._v(" "),n("p",[s._v("接下来：")]),s._v(" "),n("div",{staticClass:"language-shell line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-shell"}},[n("code",[n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" /root\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("rm")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-rf")]),s._v(" node-v14.3.0-linux-x64.tar.xz "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 删除安装包")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br")])]),n("p",[s._v("解压完成的"),n("code",[s._v("node-v14.3.0-linux-x64")]),s._v("就"),n("strong",[s._v("别删了")]),s._v("。")]),s._v(" "),n("h2",{attrs:{id:"二、安装nginx"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#二、安装nginx"}},[s._v("#")]),s._v(" 二、安装"),n("code",[s._v("nginx")])]),s._v(" "),n("p",[s._v("安装"),n("code",[s._v("nginx")]),s._v("和上面的差不多过程。。")]),s._v(" "),n("h3",{attrs:{id:"_1-下载安装包-2"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1-下载安装包-2"}},[s._v("#")]),s._v(" 1.下载安装包")]),s._v(" "),n("div",{staticClass:"language-shell line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-shell"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[s._v("wget")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-c")]),s._v(" https://nginx.org/download/nginx-1.16.1.tar.gz\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[n("img",{attrs:{src:"/images/other/systemenv/centos-nginx-01.png",alt:"centos-nginx-01"}})]),s._v(" "),n("h3",{attrs:{id:"_2-开始安装-2"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_2-开始安装-2"}},[s._v("#")]),s._v(" 2.开始安装")]),s._v(" "),n("div",{staticClass:"language-shell line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-shell"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[s._v("mv")]),s._v(" nginx-1.16.1.tar.gz /usr/local "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 将安装包移动到/usr/local目录下")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" /usr/local "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("ls")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 进入/usr/local目录并浏览")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("tar")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-xf")]),s._v(" nginx-1.16.1.tar.gz "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 解压")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" nginx-1.16.1 "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("ls")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("make")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("make")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 编译安装")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br")])]),n("p",[n("img",{attrs:{src:"/images/other/systemenv/centos-nginx-02.png",alt:"centos-nginx-02"}})]),s._v(" "),n("div",{staticClass:"language-shell line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-shell"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[s._v("whereis")]),s._v(" nginx "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看nginx位置")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" /usr/bin/nginx "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 进不去，说明nginx不存在或者不是个文件夹")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# conf里面的nginx.conf就是配置nginx的地方，sbin则是存放编译后的nginx等的地方")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" /usr/local/nginx "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("ls")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" sbin\nnginx "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 通过这一步和上一步可以发现全局中没有nginx")]),s._v("\n./nginx "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 启动")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("ps")]),s._v(" aux"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" nginx "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看nginx进程")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br")])]),n("p",[n("img",{attrs:{src:"/images/other/systemenv/centos-nginx-03.png",alt:"centos-nginx-03"}})]),s._v(" "),n("p",[n("code",[s._v("nginx")]),s._v("此时已开启，默认配置是"),n("code",[s._v("80")]),s._v("端口，此时打开浏览器输入服务器的外网地址，可以发现👇")]),s._v(" "),n("p",[n("img",{attrs:{src:"/images/other/systemenv/centos-nginx-05.png",alt:"centos-nginx-05"}})]),s._v(" "),n("h3",{attrs:{id:"_3-配置nginx的开机自启动"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_3-配置nginx的开机自启动"}},[s._v("#")]),s._v(" 3.配置nginx的开机自启动")]),s._v(" "),n("div",{staticClass:"language-shell line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-shell"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[s._v("vim")]),s._v(" /etc/rc.local "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 此时进入文件的查看模式")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("按"),n("code",[s._v("i")]),s._v("进入"),n("strong",[s._v("编辑模式")]),s._v("，在最后一行加上"),n("code",[s._v("/usr/local/nginx-1.16.1/sbin/nginx")]),s._v("，按"),n("code",[s._v("esc")]),s._v("退出"),n("strong",[s._v("编辑模式")]),s._v("，输入"),n("code",[s._v(":wq")]),n("strong",[s._v("退出并保存")]),s._v("。")]),s._v(" "),n("h3",{attrs:{id:"_4-最后"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_4-最后"}},[s._v("#")]),s._v(" 4.最后")]),s._v(" "),n("div",{staticClass:"language-shell line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-shell"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 建立软链接，将nginx添加到全局")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("ln")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-s")]),s._v(" /usr/local/nginx-1.16.1/sbin/nginx /usr/bin/nginx\n\n"),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" /usr/local\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("rm")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-rf")]),s._v(" nginx-1.16.1.tar.gz "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 删除安装包")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br")])])],1)}),[],!1,null,null,null);n.default=t.exports}}]);