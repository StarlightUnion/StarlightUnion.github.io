(window.webpackJsonp=window.webpackJsonp||[]).push([[112],{806:function(s,a,t){"use strict";t.r(a);var n=t(39),e=Object(n.a)({},(function(){var s=this,a=s._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"git派生-fork-的仓库代码的同步问题"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#git派生-fork-的仓库代码的同步问题"}},[s._v("#")]),s._v(" Git派生（fork）的仓库代码的同步问题")]),s._v(" "),a("ClientOnly",[a("display-bar",{attrs:{displayData:s.$frontmatter}})],1),s._v(" "),a("blockquote",[a("p",[s._v("部门有"),a("strong",[s._v("产品代码")]),s._v("一份，其它项目代码多从这份产品上"),a("strong",[s._v("派生")]),s._v("（fork）。")]),s._v(" "),a("p",[s._v("但产品代码其实并不成熟，还在修改完善中。其它"),a("strong",[s._v("派生的仓库")]),s._v("需要和"),a("strong",[s._v("产品仓库")]),s._v("保持同步。")])]),s._v(" "),a("p",[s._v("好了，需求有了，现在有两个办法：🤔")]),s._v(" "),a("h2",{attrs:{id:"一、给派生仓库设置上游仓库"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#一、给派生仓库设置上游仓库"}},[s._v("#")]),s._v(" 一、给派生仓库设置上游仓库")]),s._v(" "),a("p",[a("img",{attrs:{src:"/images/other/devtool/forked-update-01.png",alt:"forked-update-01"}})]),s._v(" "),a("p",[a("img",{attrs:{src:"/images/other/devtool/forked-update-02.png",alt:"forked-update-02"}})]),s._v(" "),a("p",[a("img",{attrs:{src:"/images/other/devtool/forked-update-03.png",alt:"forked-update-03"}})]),s._v(" "),a("h3",{attrs:{id:"命令详解"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#命令详解"}},[s._v("#")]),s._v(" 命令详解")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 设置上游仓库地址")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" remote "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("add")]),s._v(" upstream http://example/exampleRepo.git\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看该仓库关联的所有远程仓库")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" remote "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-v")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 拉取上游仓库代码，拉取成功后会存放在 upstream/master 分支")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" fetch upstream\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看所有分支")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" branch "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-a")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v('# 下面的 "git branch" 是查看当前所在分支')]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 合并要在 master 进行，若当前不在需要切换回 master")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" merge upstream/master\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" checkout master "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 切换回 master")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br")])]),a("p",[s._v("合并之后将代码上传至远程仓库（"),a("strong",[s._v("非上游仓库")]),s._v("）即可。")]),s._v(" "),a("h2",{attrs:{id:"二、给产品仓库设置多个远程仓库"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#二、给产品仓库设置多个远程仓库"}},[s._v("#")]),s._v(" 二、给产品仓库设置多个远程仓库")]),s._v(" "),a("p",[s._v("第二个方法就是"),a("strong",[s._v("给产品仓库设置多个远程仓库地址")]),s._v("，这样在产品仓库修改代码提交（push）时可以同步提交到设置的那几个远程仓库，实现多仓库同步。")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 设置远程仓库")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" remote set-url "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--add")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--push")]),s._v(" origin http://example/exampleRepo.git\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看该仓库关联的所有远程仓库")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" remote "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-v")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])]),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[s._v("不用输命令也可以查看关联的远程仓库地址")]),s._v(" "),a("p",[s._v("在本地仓库根目录中找到"),a("code",[s._v(".git/config")]),s._v("，"),a("code",[s._v(".git")]),s._v("一般隐藏。")]),s._v(" "),a("p",[a("img",{attrs:{src:"/images/other/devtool/forked-update-04.png",alt:"forked-update-04"}})])]),s._v(" "),a("h2",{attrs:{id:"三、编写同步脚本"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#三、编写同步脚本"}},[s._v("#")]),s._v(" 三、编写同步脚本")]),s._v(" "),a("blockquote",[a("p",[s._v("第三个方法是后面添加的，最后采用了这个方法。")])]),s._v(" "),a("p",[s._v("结合之前的经验，考虑到"),a("strong",[s._v("当前产品派生的项目非常多")]),s._v("，一个个项目这样打命令还是太麻烦。")]),s._v(" "),a("p",[s._v("所以还是写一个脚本来同步更新比较好。下面是一个脚本实例：👇")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# update.sh")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("set")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-e")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 确保脚本执行时抛出错误")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'代码同步开始...'")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 空行")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'当前项目所有分支：'")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" branch "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--list")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'切换到主分支master：'")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" checkout master\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'拉取产品最新代码：'")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" fetch http://exampleRepo.git\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'合并代码：'")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" merge FETCH_HEAD\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'提交代码：'")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" push\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'代码同步完成！'")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br")])]),a("div",{staticClass:"custom-block danger"},[a("p",{staticClass:"custom-block-title"},[s._v("注意")]),s._v(" "),a("ul",[a("li",[a("p",[s._v("在"),a("code",[s._v("Windows")]),s._v("下执行"),a("code",[s._v("shell")]),s._v("脚本不要使用"),a("code",[s._v("CMD")]),s._v("和"),a("code",[s._v("PowerShell")]),s._v("，请使用"),a("code",[s._v("Git Bash")]),s._v("，就是安装"),a("code",[s._v("Git")]),s._v("自带的那个命令行工具。")])]),s._v(" "),a("li",[a("p",[s._v("执行上文脚本使用命令"),a("code",[s._v("bash update.sh")]),s._v("。")])])])])],1)}),[],!1,null,null,null);a.default=e.exports}}]);