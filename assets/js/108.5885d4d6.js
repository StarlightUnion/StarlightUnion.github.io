(window.webpackJsonp=window.webpackJsonp||[]).push([[108],{805:function(t,s,a){"use strict";a.r(s);var n=a(39),e=Object(n.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"nginx部署笔记-windows-2-开机自启动"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#nginx部署笔记-windows-2-开机自启动"}},[t._v("#")]),t._v(" Nginx部署笔记-Windows（2）开机自启动")]),t._v(" "),s("ClientOnly",[s("display-bar",{attrs:{displayData:t.$frontmatter}})],1),t._v(" "),s("blockquote",[s("p",[t._v("部署完"),s("code",[t._v("nginx")]),t._v("后还要设置一下"),s("strong",[t._v("开机自启")]),t._v("，不然"),s("strong",[t._v("重启一次电脑就要手动启动")]),t._v("一次"),s("code",[t._v("nginx")]),t._v("，手打命令还是太繁琐了。本文参考资料："),s("a",{attrs:{href:"https://blog.csdn.net/hqbootstrap1/article/details/87299312",target:"_blank",rel:"noopener noreferrer"}},[t._v("windows nginx开机启动"),s("OutboundLink")],1),t._v("和"),s("a",{attrs:{href:"https://www.cnblogs.com/merray/p/8460992.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("Nginx（二）-服务模式运行nginx之WINSW"),s("OutboundLink")],1),t._v("。")])]),t._v(" "),s("p",[t._v("在Windows下实现自启动需要借助一个开源程序"),s("a",{attrs:{href:"https://github.com/winsw/winsw/releases",target:"_blank",rel:"noopener noreferrer"}},[t._v("winsw"),s("OutboundLink")],1),t._v("。")]),t._v(" "),s("h2",{attrs:{id:"一、版本选择"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#一、版本选择"}},[t._v("#")]),t._v(" 一、版本选择：")]),t._v(" "),s("div",{staticClass:"custom-block warning"},[s("p",{staticClass:"custom-block-title"},[t._v("WARNING")]),t._v(" "),s("ul",[s("li",[s("code",[t._v(".NET Framework2.0")]),t._v(" 选择"),s("code",[t._v("WinSW.NET2.exe")])]),t._v(" "),s("li",[s("code",[t._v(".NET Framework4.0")]),t._v(" 选择"),s("code",[t._v("WinSW.NET4.exe")])])])]),t._v(" "),s("h2",{attrs:{id:"二、配置文件"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#二、配置文件"}},[t._v("#")]),t._v(" 二、配置文件")]),t._v(" "),s("p",[t._v("将这个"),s("code",[t._v("exe")]),t._v("放到"),s("code",[t._v("nginx")]),t._v("根目录下，将其名字改为"),s("code",[t._v("start-nginx.exe")]),t._v("，"),s("strong",[t._v("当然名字是自定义的")]),t._v("。再新建一个"),s("code",[t._v("txt")]),t._v("文件，将名字改为"),s("code",[t._v("start-nginx.xml")]),t._v("，"),s("strong",[t._v("扩展名前面的名字部分要保持一致")]),t._v("。在"),s("code",[t._v("start-nginx.xml")]),t._v("里面添加如下代码：")]),t._v(" "),s("div",{staticClass:"language-xml line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-xml"}},[s("code",[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("service")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("id")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("start-nginx"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("id")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("name")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("start-nginx"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("name")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("description")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("nginx self starting"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("description")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("logpath")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("D:\\nginx-1.14.2\\"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("logpath")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("logmode")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("roll"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("logmode")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("depend")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("depend")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("executable")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("D:\\nginx-1.14.2\\nginx.exe"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("executable")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("stopexecutable")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("D:\\nginx-1.14.2\\nginx.exe -s stop"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("stopexecutable")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("service")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br")])]),s("h2",{attrs:{id:"三、安装"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#三、安装"}},[t._v("#")]),t._v(" 三、安装")]),t._v(" "),s("p",[s("img",{attrs:{src:"/images/other/aboutdeploy/nginx-start-01.png",alt:"nginx"}})]),t._v(" "),s("p",[t._v("打开"),s("code",[t._v("cmd")]),t._v("进入到"),s("code",[t._v("nginx")]),t._v("根目录，输入"),s("code",[t._v("start-nginx.exe install")]),t._v("。")]),t._v(" "),s("div",{staticClass:"custom-block danger"},[s("p",{staticClass:"custom-block-title"},[t._v("WARNING")]),t._v(" "),s("p",[t._v("需要注意的是如果使用"),s("code",[t._v("powershell")]),t._v("会"),s("strong",[t._v("出现错误")]),t._v("。")])]),t._v(" "),s("p",[s("img",{attrs:{src:"/images/other/aboutdeploy/nginx-start-03.jpg",alt:"nginx"}})]),t._v(" "),s("p",[t._v("安装后"),s("code",[t._v("nginx")]),t._v("根目录下会生成上图所示的多个文件，但是此时"),s("strong",[t._v("服务并未启动！！！")])]),t._v(" "),s("h2",{attrs:{id:"四、开启自启动"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#四、开启自启动"}},[t._v("#")]),t._v(" 四、开启自启动")]),t._v(" "),s("p",[s("strong",[t._v("要设置成开机自启动，仍需要两步骤：")])]),t._v(" "),s("ul",[s("li",[t._v("1.打开"),s("strong",[t._v("任务管理器")]),t._v("，选择最后一栏"),s("strong",[t._v("服务")]),t._v("，找到在"),s("code",[t._v("start-nginx.xml")]),t._v("中设置的"),s("code",[t._v("name")]),t._v("对应的服务，右键选择"),s("code",[t._v("开始")]),t._v("。")])]),t._v(" "),s("p",[s("img",{attrs:{src:"/images/other/aboutdeploy/nginx-start-02.png",alt:"nginx"}})]),t._v(" "),s("ul",[s("li",[t._v("2.再次点击右键，选择"),s("code",[t._v("打开服务")]),t._v("，跟上面一样找到服务，"),s("strong",[t._v("查看启动类型")]),t._v("是否为"),s("code",[t._v("自动")]),t._v("，右键选择"),s("code",[t._v("属性")]),t._v("可以设置"),s("code",[t._v("启动类型")]),t._v("。")])]),t._v(" "),s("p",[s("img",{attrs:{src:"/images/other/aboutdeploy/nginx-start-04.png",alt:"nginx"}})]),t._v(" "),s("p",[s("img",{attrs:{src:"/images/other/aboutdeploy/nginx-start-05.png",alt:"nginx"}})]),t._v(" "),s("h2",{attrs:{id:"五、常用命令"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#五、常用命令"}},[t._v("#")]),t._v(" 五、常用命令")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("Command")]),t._v(" "),s("th",[t._v("Description")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[s("code",[t._v("install")])]),t._v(" "),s("td",[t._v("安装服务")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("uninstall")])]),t._v(" "),s("td",[t._v("卸载服务")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("start")])]),t._v(" "),s("td",[t._v("开启服务")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("stop")])]),t._v(" "),s("td",[t._v("停止服务")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("restart")])]),t._v(" "),s("td",[t._v("重启服务")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("status")])]),t._v(" "),s("td",[t._v("检查当前服务的状态")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("refresh")])]),t._v(" "),s("td",[t._v("刷新服务")])])])])],1)}),[],!1,null,null,null);s.default=e.exports}}]);